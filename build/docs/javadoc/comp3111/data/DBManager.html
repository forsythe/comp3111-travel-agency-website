<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_144) on Mon Nov 20 00:59:25 CST 2017 -->
<title>DBManager (website API)</title>
<meta name="date" content="2017-11-20">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DBManager (website API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../comp3111/data/GridCol.html" title="class in comp3111.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?comp3111/data/DBManager.html" target="_top">Frames</a></li>
<li><a href="DBManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">comp3111.data</div>
<h2 title="Class DBManager" class="title">Class DBManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>comp3111.data.DBManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Component
public class <span class="typeNameLabel">DBManager</span>
extends java.lang.Object</pre>
<div class="block">A mediator class responsible for handling common database actions.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#DBManager--">DBManager</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#countNumberOfPaidPeopleInOffering-comp3111.data.model.Offering-">countNumberOfPaidPeopleInOffering</a></span>(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;offering)</code>
<div class="block">Counts how many paying customers are associated with the offering</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#countNumOfferingsForTour-comp3111.data.model.Tour-">countNumOfferingsForTour</a></span>(<a href="../../comp3111/data/model/Tour.html" title="class in comp3111.data.model">Tour</a>&nbsp;t)</code>
<div class="block">Counts how many offerings have been made for this tour</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#createBookingForOffering-comp3111.data.model.Offering-comp3111.data.model.Customer-int-int-int-double-java.lang.String-java.lang.String-double-">createBookingForOffering</a></span>(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;o,
                        <a href="../../comp3111/data/model/Customer.html" title="class in comp3111.data.model">Customer</a>&nbsp;c,
                        int&nbsp;numAdults,
                        int&nbsp;numChildren,
                        int&nbsp;numToddlers,
                        double&nbsp;amountPaid,
                        java.lang.String&nbsp;specialRequests,
                        java.lang.String&nbsp;paymentStatus,
                        double&nbsp;discount)</code>
<div class="block">Creates a normal (non-promo event) booking for an offering</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#createBookingForOffering-comp3111.data.model.Offering-comp3111.data.model.Customer-int-int-int-double-java.lang.String-java.lang.String-double-java.lang.String-">createBookingForOffering</a></span>(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;o,
                        <a href="../../comp3111/data/model/Customer.html" title="class in comp3111.data.model">Customer</a>&nbsp;c,
                        int&nbsp;numAdults,
                        int&nbsp;numChildren,
                        int&nbsp;numToddlers,
                        double&nbsp;amountPaid,
                        java.lang.String&nbsp;specialRequests,
                        java.lang.String&nbsp;paymentStatus,
                        double&nbsp;discount,
                        java.lang.String&nbsp;promoCodeUsed)</code>
<div class="block">Creates a booking for an offering with a promo code</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#createBookingForOfferingWithPromoCode-comp3111.data.model.Booking-java.lang.String-">createBookingForOfferingWithPromoCode</a></span>(<a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a>&nbsp;booking,
                                     java.lang.String&nbsp;promocode)</code>
<div class="block">Creates a booking a promo code, given a booking object and promo code</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../comp3111/data/model/LoginUser.html" title="class in comp3111.data.model">LoginUser</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#createNewLogin-java.lang.String-java.lang.String-">createNewLogin</a></span>(java.lang.String&nbsp;username,
              java.lang.String&nbsp;rawPassword)</code>
<div class="block">Create a new login user</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#createNormalBookingForOffering-comp3111.data.model.Booking-">createNormalBookingForOffering</a></span>(<a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a>&nbsp;booking)</code>
<div class="block">Persists a transient booking object</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#createOfferingForTour-comp3111.data.model.Offering-">createOfferingForTour</a></span>(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;offering)</code>
<div class="block">Persists a transient offering object into the database</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#createOfferingForTour-comp3111.data.model.Tour-comp3111.data.model.TourGuide-java.util.Date-java.lang.String-int-int-">createOfferingForTour</a></span>(<a href="../../comp3111/data/model/Tour.html" title="class in comp3111.data.model">Tour</a>&nbsp;tour,
                     <a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg,
                     java.util.Date&nbsp;startDate,
                     java.lang.String&nbsp;hotelName,
                     int&nbsp;minCustomers,
                     int&nbsp;maxCustomers)</code>
<div class="block">Creates and persists a new offering in the database.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#deleteAll--">deleteAll</a></span>()</code>
<div class="block">Clears out all the repositories (except the login user one)</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#editOfferingTorTour-comp3111.data.model.Offering-">editOfferingTorTour</a></span>(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;o)</code>
<div class="block">Persists an edited detached or transient Offering object</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#findBookingsForOffering-comp3111.data.model.Offering-">findBookingsForOffering</a></span>(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;offering)</code>
<div class="block">Finds all the bookings for an offering</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#findOfferingsByTourGuide-comp3111.data.model.TourGuide-">findOfferingsByTourGuide</a></span>(<a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg)</code>
<div class="block">Finds all the offerings associated with a tour guide</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#isTourGuideAvailableBetweenDate-comp3111.data.model.TourGuide-java.util.Date-java.util.Date-">isTourGuideAvailableBetweenDate</a></span>(<a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg,
                               java.util.Date&nbsp;testStart,
                               java.util.Date&nbsp;testEnd)</code>
<div class="block">Checks if a tour guide is available during a time interval</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#isTourGuideAvailableBetweenDateExcludeOffering-comp3111.data.model.TourGuide-java.util.Date-java.util.Date-comp3111.data.model.Offering-">isTourGuideAvailableBetweenDateExcludeOffering</a></span>(<a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg,
                                              java.util.Date&nbsp;testStart,
                                              java.util.Date&nbsp;testEnd,
                                              <a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;ignoredOffering)</code>
<div class="block">Checks if a tour guide is free between a time interval, but ignoring the
 potential time conflict of a single offering</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#isTourGuideAvailableForOffering-comp3111.data.model.TourGuide-comp3111.data.model.Offering-">isTourGuideAvailableForOffering</a></span>(<a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg,
                               <a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;proposedOffering)</code>
<div class="block">Checks if a tour guide is free to lead an offering</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#notifyOfferingStatus-comp3111.data.model.Offering-boolean-">notifyOfferingStatus</a></span>(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;offering,
                    boolean&nbsp;confirmed)</code>
<div class="block">Notifies all customers via LINE who have made bookings for the specified
 offering about the status of said offering.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../comp3111/data/DBManager.html#validatePromoCode-java.lang.String-">validatePromoCode</a></span>(java.lang.String&nbsp;promoCode)</code>
<div class="block">Validates promo codes</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DBManager--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DBManager</h4>
<pre>public&nbsp;DBManager()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createOfferingForTour-comp3111.data.model.Tour-comp3111.data.model.TourGuide-java.util.Date-java.lang.String-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createOfferingForTour</h4>
<pre>public&nbsp;<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;createOfferingForTour(<a href="../../comp3111/data/model/Tour.html" title="class in comp3111.data.model">Tour</a>&nbsp;tour,
                                      <a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg,
                                      java.util.Date&nbsp;startDate,
                                      java.lang.String&nbsp;hotelName,
                                      int&nbsp;minCustomers,
                                      int&nbsp;maxCustomers)
                               throws <a href="../../comp3111/input/exceptions/OfferingDateUnsupportedException.html" title="class in comp3111.input.exceptions">OfferingDateUnsupportedException</a>,
                                      <a href="../../comp3111/input/exceptions/TourGuideUnavailableException.html" title="class in comp3111.input.exceptions">TourGuideUnavailableException</a></pre>
<div class="block">Creates and persists a new offering in the database.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tour</code> - The tour for which the offering belongs to</dd>
<dd><code>tg</code> - The tour guide leading this offering</dd>
<dd><code>startDate</code> - When the offering starts</dd>
<dd><code>hotelName</code> - The hotel name</dd>
<dd><code>minCustomers</code> - The minimum number of customers required for this offering to be
            considered as <a href="../../comp3111/data/model/Offering.html#STATUS_CONFIRMED"><code>Offering.STATUS_CONFIRMED</code></a></dd>
<dd><code>maxCustomers</code> - The maximum number of spots available for this offering</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The persisted offering object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/OfferingDateUnsupportedException.html" title="class in comp3111.input.exceptions">OfferingDateUnsupportedException</a></code> - If you try to create an offering on a date or day of week for
             which the Tour does not support</dd>
<dd><code><a href="../../comp3111/input/exceptions/TourGuideUnavailableException.html" title="class in comp3111.input.exceptions">TourGuideUnavailableException</a></code> - If you try to assign a tour guide who has a time conflict with
             this offering</dd>
</dl>
</li>
</ul>
<a name="editOfferingTorTour-comp3111.data.model.Offering-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>editOfferingTorTour</h4>
<pre>public&nbsp;<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;editOfferingTorTour(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;o)
                             throws <a href="../../comp3111/input/exceptions/TourGuideUnavailableException.html" title="class in comp3111.input.exceptions">TourGuideUnavailableException</a>,
                                    <a href="../../comp3111/input/exceptions/OfferingDateUnsupportedException.html" title="class in comp3111.input.exceptions">OfferingDateUnsupportedException</a></pre>
<div class="block">Persists an edited detached or transient Offering object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>o</code> - The Offering object to persist</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The persisted Offering object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/TourGuideUnavailableException.html" title="class in comp3111.input.exceptions">TourGuideUnavailableException</a></code> - If you try to assign a tour guide who has a time conflict with
             this offering</dd>
<dd><code><a href="../../comp3111/input/exceptions/OfferingDateUnsupportedException.html" title="class in comp3111.input.exceptions">OfferingDateUnsupportedException</a></code> - If you try to create an offering on a date or day of week for
             which the Tour does not support</dd>
</dl>
</li>
</ul>
<a name="isTourGuideAvailableForOffering-comp3111.data.model.TourGuide-comp3111.data.model.Offering-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTourGuideAvailableForOffering</h4>
<pre>public&nbsp;boolean&nbsp;isTourGuideAvailableForOffering(<a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg,
                                               <a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;proposedOffering)</pre>
<div class="block">Checks if a tour guide is free to lead an offering</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tg</code> - The tour guide</dd>
<dd><code>proposedOffering</code> - An offering</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether or not the tour guide is free to lead this offering.</dd>
</dl>
</li>
</ul>
<a name="isTourGuideAvailableBetweenDate-comp3111.data.model.TourGuide-java.util.Date-java.util.Date-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTourGuideAvailableBetweenDate</h4>
<pre>public&nbsp;boolean&nbsp;isTourGuideAvailableBetweenDate(<a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg,
                                               java.util.Date&nbsp;testStart,
                                               java.util.Date&nbsp;testEnd)</pre>
<div class="block">Checks if a tour guide is available during a time interval</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tg</code> - The tour guide</dd>
<dd><code>testStart</code> - The beginning date</dd>
<dd><code>testEnd</code> - The ending date</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether or not the tour guide is free (to lead more offerings)
         between this date interval</dd>
</dl>
</li>
</ul>
<a name="isTourGuideAvailableBetweenDateExcludeOffering-comp3111.data.model.TourGuide-java.util.Date-java.util.Date-comp3111.data.model.Offering-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTourGuideAvailableBetweenDateExcludeOffering</h4>
<pre>public&nbsp;boolean&nbsp;isTourGuideAvailableBetweenDateExcludeOffering(<a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg,
                                                              java.util.Date&nbsp;testStart,
                                                              java.util.Date&nbsp;testEnd,
                                                              <a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;ignoredOffering)</pre>
<div class="block">Checks if a tour guide is free between a time interval, but ignoring the
 potential time conflict of a single offering</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tg</code> - The tour guide</dd>
<dd><code>testStart</code> - The start date interval to check if the tour guide is free</dd>
<dd><code>testEnd</code> - The end date of the interval to check</dd>
<dd><code>ignoredOffering</code> - The offering to ignore.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether the tour guide is available between the specified range. It
         scans all offerings associated with this tour guide, and checks if
         there are any time collisions with the provided date range. We also
         ignore the timerange used by the offering "ignoredOffering"</dd>
</dl>
</li>
</ul>
<a name="createOfferingForTour-comp3111.data.model.Offering-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createOfferingForTour</h4>
<pre>public&nbsp;void&nbsp;createOfferingForTour(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;offering)
                           throws <a href="../../comp3111/input/exceptions/OfferingDateUnsupportedException.html" title="class in comp3111.input.exceptions">OfferingDateUnsupportedException</a>,
                                  <a href="../../comp3111/input/exceptions/TourGuideUnavailableException.html" title="class in comp3111.input.exceptions">TourGuideUnavailableException</a></pre>
<div class="block">Persists a transient offering object into the database</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offering</code> - A transient offering object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/TourGuideUnavailableException.html" title="class in comp3111.input.exceptions">TourGuideUnavailableException</a></code> - If you try to assign a tour guide who has a time conflict with
             this offering</dd>
<dd><code><a href="../../comp3111/input/exceptions/OfferingDateUnsupportedException.html" title="class in comp3111.input.exceptions">OfferingDateUnsupportedException</a></code> - If you try to create an offering on a date or day of week for
             which the Tour does not support</dd>
</dl>
</li>
</ul>
<a name="createBookingForOffering-comp3111.data.model.Offering-comp3111.data.model.Customer-int-int-int-double-java.lang.String-java.lang.String-double-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBookingForOffering</h4>
<pre>public&nbsp;<a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a>&nbsp;createBookingForOffering(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;o,
                                        <a href="../../comp3111/data/model/Customer.html" title="class in comp3111.data.model">Customer</a>&nbsp;c,
                                        int&nbsp;numAdults,
                                        int&nbsp;numChildren,
                                        int&nbsp;numToddlers,
                                        double&nbsp;amountPaid,
                                        java.lang.String&nbsp;specialRequests,
                                        java.lang.String&nbsp;paymentStatus,
                                        double&nbsp;discount,
                                        java.lang.String&nbsp;promoCodeUsed)
                                 throws <a href="../../comp3111/input/exceptions/OfferingOutOfRoomException.html" title="class in comp3111.input.exceptions">OfferingOutOfRoomException</a></pre>
<div class="block">Creates a booking for an offering with a promo code</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>o</code> - An offering to make a booking in</dd>
<dd><code>c</code> - Customer who made the booking</dd>
<dd><code>numAdults</code> - Number of adults</dd>
<dd><code>numChildren</code> - Number of children</dd>
<dd><code>numToddlers</code> - Number of toddlers</dd>
<dd><code>amountPaid</code> - The dollar amount the customer has already paid</dd>
<dd><code>specialRequests</code> - Any special requests made by the customer</dd>
<dd><code>paymentStatus</code> - The payment status. Can be <a href="../../comp3111/data/model/Booking.html#PAYMENT_PENDING"><code>Booking.PAYMENT_PENDING</code></a>,
            <a href="../../comp3111/data/model/Booking.html#PAYMENT_CONFIRMED"><code>Booking.PAYMENT_CONFIRMED</code></a>, or
            <a href="../../comp3111/data/model/Booking.html#PAYMENT_CANCELLED_BECAUSE_OFFERING_CANCELLED"><code>Booking.PAYMENT_CANCELLED_BECAUSE_OFFERING_CANCELLED</code></a></dd>
<dd><code>discount</code> - A double between [0, 1.0] indicating the discount multiplier. 1.0
            for full price (no discount).</dd>
<dd><code>promoCodeUsed</code> - The promo code used</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The persisted Booking object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/OfferingOutOfRoomException.html" title="class in comp3111.input.exceptions">OfferingOutOfRoomException</a></code> - If, after adding the number of adults, children, and toddlers to
             the current number of people in this offering, the value exceeds
             <a href="../../comp3111/data/model/Offering.html#getMaxCustomers--"><code>Offering.getMaxCustomers()</code></a></dd>
</dl>
</li>
</ul>
<a name="createBookingForOffering-comp3111.data.model.Offering-comp3111.data.model.Customer-int-int-int-double-java.lang.String-java.lang.String-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBookingForOffering</h4>
<pre>public&nbsp;<a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a>&nbsp;createBookingForOffering(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;o,
                                        <a href="../../comp3111/data/model/Customer.html" title="class in comp3111.data.model">Customer</a>&nbsp;c,
                                        int&nbsp;numAdults,
                                        int&nbsp;numChildren,
                                        int&nbsp;numToddlers,
                                        double&nbsp;amountPaid,
                                        java.lang.String&nbsp;specialRequests,
                                        java.lang.String&nbsp;paymentStatus,
                                        double&nbsp;discount)
                                 throws <a href="../../comp3111/input/exceptions/OfferingOutOfRoomException.html" title="class in comp3111.input.exceptions">OfferingOutOfRoomException</a></pre>
<div class="block">Creates a normal (non-promo event) booking for an offering</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>o</code> - An offering to make a booking in</dd>
<dd><code>c</code> - Customer who made the booking</dd>
<dd><code>numAdults</code> - Number of adults</dd>
<dd><code>numChildren</code> - Number of children</dd>
<dd><code>numToddlers</code> - Number of toddlers</dd>
<dd><code>amountPaid</code> - The dollar amount the customer has already paid</dd>
<dd><code>specialRequests</code> - Any special requests made by the customer</dd>
<dd><code>paymentStatus</code> - The payment status. Can be <a href="../../comp3111/data/model/Booking.html#PAYMENT_PENDING"><code>Booking.PAYMENT_PENDING</code></a>,
            <a href="../../comp3111/data/model/Booking.html#PAYMENT_CONFIRMED"><code>Booking.PAYMENT_CONFIRMED</code></a>, or
            <a href="../../comp3111/data/model/Booking.html#PAYMENT_CANCELLED_BECAUSE_OFFERING_CANCELLED"><code>Booking.PAYMENT_CANCELLED_BECAUSE_OFFERING_CANCELLED</code></a></dd>
<dd><code>discount</code> - A double between [0, 1.0] indicating the discount multiplier. 1.0
            for full price (no discount).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The persisted Booking object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/OfferingOutOfRoomException.html" title="class in comp3111.input.exceptions">OfferingOutOfRoomException</a></code> - If, after adding the number of adults, children, and toddlers to
             the current number of people in this offering, the value exceeds
             <a href="../../comp3111/data/model/Offering.html#getMaxCustomers--"><code>Offering.getMaxCustomers()</code></a></dd>
</dl>
</li>
</ul>
<a name="createNormalBookingForOffering-comp3111.data.model.Booking-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNormalBookingForOffering</h4>
<pre>public&nbsp;void&nbsp;createNormalBookingForOffering(<a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a>&nbsp;booking)
                                    throws <a href="../../comp3111/input/exceptions/OfferingOutOfRoomException.html" title="class in comp3111.input.exceptions">OfferingOutOfRoomException</a></pre>
<div class="block">Persists a transient booking object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>booking</code> - A transient Booking object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/OfferingOutOfRoomException.html" title="class in comp3111.input.exceptions">OfferingOutOfRoomException</a></code> - If, after adding the number of adults, children, and toddlers to
             the current number of people in this offering, the value exceeds
             <a href="../../comp3111/data/model/Offering.html#getMaxCustomers--"><code>Offering.getMaxCustomers()</code></a></dd>
</dl>
</li>
</ul>
<a name="validatePromoCode-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validatePromoCode</h4>
<pre>public&nbsp;boolean&nbsp;validatePromoCode(java.lang.String&nbsp;promoCode)
                          throws <a href="../../comp3111/input/exceptions/PromoCodeUsedUpException.html" title="class in comp3111.input.exceptions">PromoCodeUsedUpException</a>,
                                 <a href="../../comp3111/input/exceptions/NoSuchPromoCodeException.html" title="class in comp3111.input.exceptions">NoSuchPromoCodeException</a></pre>
<div class="block">Validates promo codes</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>promoCode</code> - The promo code</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether this promo code is valid</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/PromoCodeUsedUpException.html" title="class in comp3111.input.exceptions">PromoCodeUsedUpException</a></code> - If the promo code has been used up</dd>
<dd><code><a href="../../comp3111/input/exceptions/NoSuchPromoCodeException.html" title="class in comp3111.input.exceptions">NoSuchPromoCodeException</a></code> - If the promo code doesn't exist</dd>
</dl>
</li>
</ul>
<a name="createBookingForOfferingWithPromoCode-comp3111.data.model.Booking-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBookingForOfferingWithPromoCode</h4>
<pre>public&nbsp;void&nbsp;createBookingForOfferingWithPromoCode(<a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a>&nbsp;booking,
                                                  java.lang.String&nbsp;promocode)
                                           throws <a href="../../comp3111/input/exceptions/OfferingOutOfRoomException.html" title="class in comp3111.input.exceptions">OfferingOutOfRoomException</a>,
                                                  <a href="../../comp3111/input/exceptions/PromoCodeUsedUpException.html" title="class in comp3111.input.exceptions">PromoCodeUsedUpException</a>,
                                                  <a href="../../comp3111/input/exceptions/NoSuchPromoCodeException.html" title="class in comp3111.input.exceptions">NoSuchPromoCodeException</a>,
                                                  <a href="../../comp3111/input/exceptions/PromoForCustomerExceededException.html" title="class in comp3111.input.exceptions">PromoForCustomerExceededException</a>,
                                                  <a href="../../comp3111/input/exceptions/PromoCodeNotForOfferingException.html" title="class in comp3111.input.exceptions">PromoCodeNotForOfferingException</a></pre>
<div class="block">Creates a booking a promo code, given a booking object and promo code</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>booking</code> - The booking to make an offering for</dd>
<dd><code>promocode</code> - The promo code</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/OfferingOutOfRoomException.html" title="class in comp3111.input.exceptions">OfferingOutOfRoomException</a></code> - If the offering is out of room</dd>
<dd><code><a href="../../comp3111/input/exceptions/PromoCodeUsedUpException.html" title="class in comp3111.input.exceptions">PromoCodeUsedUpException</a></code> - If the promo code has been used up</dd>
<dd><code><a href="../../comp3111/input/exceptions/NoSuchPromoCodeException.html" title="class in comp3111.input.exceptions">NoSuchPromoCodeException</a></code> - If no such promo code exists</dd>
<dd><code><a href="../../comp3111/input/exceptions/PromoForCustomerExceededException.html" title="class in comp3111.input.exceptions">PromoForCustomerExceededException</a></code> - If the customer exceeded the maximum number of reservations
             allowed per promotional booking</dd>
<dd><code><a href="../../comp3111/input/exceptions/PromoCodeNotForOfferingException.html" title="class in comp3111.input.exceptions">PromoCodeNotForOfferingException</a></code> - If the wrong promo code was used</dd>
</dl>
</li>
</ul>
<a name="findOfferingsByTourGuide-comp3111.data.model.TourGuide-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findOfferingsByTourGuide</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&gt;&nbsp;findOfferingsByTourGuide(<a href="../../comp3111/data/model/TourGuide.html" title="class in comp3111.data.model">TourGuide</a>&nbsp;tg)</pre>
<div class="block">Finds all the offerings associated with a tour guide</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tg</code> - A tour guide</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A collection of offerings (of ALL statuses; pending, confirmed,
         cancelled) led by this tour guide in the past and assigned in the
         future</dd>
</dl>
</li>
</ul>
<a name="findBookingsForOffering-comp3111.data.model.Offering-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findBookingsForOffering</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../comp3111/data/model/Booking.html" title="class in comp3111.data.model">Booking</a>&gt;&nbsp;findBookingsForOffering(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;offering)</pre>
<div class="block">Finds all the bookings for an offering</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offering</code> - An offering</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>All bookings made for this offering</dd>
</dl>
</li>
</ul>
<a name="deleteAll--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteAll</h4>
<pre>public&nbsp;void&nbsp;deleteAll()</pre>
<div class="block">Clears out all the repositories (except the login user one)</div>
</li>
</ul>
<a name="createNewLogin-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createNewLogin</h4>
<pre>public&nbsp;<a href="../../comp3111/data/model/LoginUser.html" title="class in comp3111.data.model">LoginUser</a>&nbsp;createNewLogin(java.lang.String&nbsp;username,
                                java.lang.String&nbsp;rawPassword)
                         throws <a href="../../comp3111/input/exceptions/UsernameTakenException.html" title="class in comp3111.input.exceptions">UsernameTakenException</a></pre>
<div class="block">Create a new login user</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - The username</dd>
<dd><code>rawPassword</code> - The raw password</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The LoginUser</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../comp3111/input/exceptions/UsernameTakenException.html" title="class in comp3111.input.exceptions">UsernameTakenException</a></code> - If the username is taken</dd>
</dl>
</li>
</ul>
<a name="countNumOfferingsForTour-comp3111.data.model.Tour-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countNumOfferingsForTour</h4>
<pre>public&nbsp;int&nbsp;countNumOfferingsForTour(<a href="../../comp3111/data/model/Tour.html" title="class in comp3111.data.model">Tour</a>&nbsp;t)</pre>
<div class="block">Counts how many offerings have been made for this tour</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>t</code> - A tour</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>How many offerings have been made for this tour</dd>
</dl>
</li>
</ul>
<a name="countNumberOfPaidPeopleInOffering-comp3111.data.model.Offering-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countNumberOfPaidPeopleInOffering</h4>
<pre>public&nbsp;int&nbsp;countNumberOfPaidPeopleInOffering(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;offering)</pre>
<div class="block">Counts how many paying customers are associated with the offering</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offering</code> - An offering</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>How many paid customers (adults, children, toddlers) are registered
         for this offering</dd>
</dl>
</li>
</ul>
<a name="notifyOfferingStatus-comp3111.data.model.Offering-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>notifyOfferingStatus</h4>
<pre>public&nbsp;void&nbsp;notifyOfferingStatus(<a href="../../comp3111/data/model/Offering.html" title="class in comp3111.data.model">Offering</a>&nbsp;offering,
                                 boolean&nbsp;confirmed)</pre>
<div class="block">Notifies all customers via LINE who have made bookings for the specified
 offering about the status of said offering.
 
 It updates the offering object's status in the database (
 <a href="../../comp3111/data/model/Offering.html#STATUS_CANCELLED"><code>Offering.STATUS_CANCELLED</code></a> or <a href="../../comp3111/data/model/Offering.html#STATUS_CONFIRMED"><code>Offering.STATUS_CONFIRMED</code></a> ).
 
 If confirmed, a success message is sent to all associated customers.
 
 However, if the offering is cancelled, then all booking records associated
 with this offering are set to
 <a href="../../comp3111/data/model/Booking.html#PAYMENT_CANCELLED_BECAUSE_OFFERING_CANCELLED"><code>Booking.PAYMENT_CANCELLED_BECAUSE_OFFERING_CANCELLED</code></a></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offering</code> - An offering</dd>
<dd><code>confirmed</code> - The new status of the offering</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../comp3111/data/GridCol.html" title="class in comp3111.data"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?comp3111/data/DBManager.html" target="_top">Frames</a></li>
<li><a href="DBManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
